{
  "hash": "5083c080a2232873154abce38519c24c",
  "result": {
    "markdown": "# Mapping individual clusters\n\n## Overview\n\nI've been wanting to make some maps that show the distribution of individual clusters/regions throughout the state of MN, for different \"clusterings\" (versions of the model, different values of k).\n\nHere I'm going to try doing that, using some similar code to what I used in @sec-map to highlight where values of LEP and EC were changed during our data prep/lumping.\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n## AOI Area: Original & Final\n\nWant to include in my results the overall area of my AOI, after the data cleaning.\nProbably the easiest way to do this is to get the included MUKEYs, then subset my original MUKEY crosswalk, which included a count of the raster cells that fell under each MUKEY (can multiply the number of raster cells by area of cell to get area of AOI).\n\nRecall that each raster cell is 10 m\\^2\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# created in ch11 \"implement k-means\"\n# ONLY included MUKEYs n=6872\nincl_mukeys_df <- read_csv(\"data/mukey_cluster_assignments_and_soilprops.csv\")\n\n# original AOI list of MUKEYs (short & original MUKEY names)\n# ALL MUKEYs in AOI = 7862\nall_aoi_mukeys <- read.delim(\"data/gSSURGO_MN/mukey_new_crosswalk.txt\", sep = \",\") %>% \n  select(MUKEY, MUKEY_New, Count)\n\n# percent MUKEYs from original AOI retained (others dropped due to lack of data / not relevant area (pits, rock outrcrops))\nround((6872/7862)*100, digits = 1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 87.4\n```\n:::\n:::\n\n\nOK, first let's calculate the total area in the AOI before we dropped any MUKEYs due to insufficient data, etc.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 7862 MUKEYs to start\norig_cells <- sum(all_aoi_mukeys$Count)\norig_cells\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1212251517\n```\n:::\n\n```{.r .cell-code}\n# calculate hectares: cell * (10 m2/1 cell) * (1 hectare/10000 m2)\n\norig_m2 <- orig_cells * 10 \n\norig_m2/10000 # hectares (original AOI)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1212252\n```\n:::\n:::\n\n\nNow calculate only the MUKEYs / area included in the final analysis after data cleaning, etc.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# n=6872\nmukeys_final_incl <- incl_mukeys_df$mukey\n\nfinal_incl_cells <-  all_aoi_mukeys %>% \n  filter(MUKEY %in% mukeys_final_incl) %>% \n  pull(Count) %>% \n  sum()\n\n# calculate hectares: cell * (10 m2/1 cell) * (1 hectare/10000 m2)\n\nfinal_m2 <- final_incl_cells * 10\n\nfinal_m2/10000 # hectares\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1090532\n```\n:::\n\n```{.r .cell-code}\n# percent area in final (relative to original AOI, before data\n# preparation)\n\nround((1090532/1212252)*100, digits = 1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 90\n```\n:::\n:::\n\n\n## k=6\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](21-map-indiv-regions_files/figure-html/plotk6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n## k=7\n\nGoing from k=6 to k=7, the main difference is that some members of Cluster 1 (coarsest, slightly acid, low OM) and Cluster 2 (Loamy/coarse-loamy, neutral to sl. acid, mod OM) in the k=6 model split off to form a third cluster with intermediate characteristics in the k=7 model.\nIn the k=7 model, this is Cluster 2 (Coarse-loamy, neutral-sl. acid, low OM)\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](21-map-indiv-regions_files/figure-html/plotk7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n## k=8\n\nGoing from k=7 to k=8, the main difference is a split in Cluster 5 (Loamy, slightly alkaline, mod-high OM, high CaCO3) from the k=7 model.\nThis cluster splits into 2 groups for the k=8 model: Cluster 4 (Loamy-clayey, slightly alkaline, highest OM, high CaCO3) and Cluster 7 (Loamy, slightly alkaline, low-mod OM, high CaCO3).\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](21-map-indiv-regions_files/figure-html/plotk8-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n## k=9\n\nGoing from k=8 to k=9, we have a very small number of mapunits (n=81) break away from Cluster 3 in the k-8 model (coarse-loamy, neutral-slightly acid, low-mod OM) to become Cluster 9 in the k=9 model (Coarse-loamy, neutral-slightly acid, low OM).\n\nLooking at the maps below, mapunits belonging to Cluster 9 are isolated to the SE corner of the state.\nSome artefacts are visible on the map, it looks like perhaps the Olmsted county is producing the rectangular boundary pattern we are seeing?\n\nThe **4 most common geomorphic descriptions** for mapunits in this cluster are: loess hills, valley sides, valley sides on loess hills\n\nThe **top 4 mapunit names** are:\n\n-   Downs-Nasset complex, sinkhole karst, 2 to 6 percent slopes\n-   Barremills silt loam, drainageway, 1 to 5 percent slopes, occasionally flooded\n-   Tama-Dinsmore complex, 2 to 6 percent slopes\n-   Fayette-Pepin complex, sinkhole karst, 6 to 12 percent slopes, moderately eroded\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](21-map-indiv-regions_files/figure-html/plotk9-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n## k=10\n\nGoing from k=9 to k=10, we have a new cluster appear in the coarse texture category, Cluster 2 (Coarse, neutral, low OM, 1.3% CaCO3).\nMost of the mapunits in this cluster came from Cluster 1 in the k=9 model (Coarsest, lowest OM, sl. acid, 0.3% CaCO3) but a few came from Cluster 2 (Coarse-loamy, neutral-slightly acid, low OM, 0.3% CaCO3).\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](21-map-indiv-regions_files/figure-html/plotk10-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n## k=11\n\nGoing from k=10 to k=11, we see a new cluster at the highest clay level created.\nIt has 204 unique MUKEYs, but appears to cover a relatively large area concentrated in the Red River Valley.\nThis is Cluster 7 in the k=11 model (Highest clay, neutral-slightly alkaline, moderate OM, 3% CaCO3, EC=1).\nIt is comprised of members from Cluster 6 (Highest clay, neutral, high OM) and Cluster 7 (Loamy, slightly alkaline, mod-high OM, 9.3% CaCO3, detect EC) in the k=10 model.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](21-map-indiv-regions_files/figure-html/plotk11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n",
    "supporting": [
      "21-map-indiv-regions_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}