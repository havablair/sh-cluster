<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Minnesota Topsoil Classification for Soil Health Assessment - 2&nbsp; Explore Map Units &amp; Components in AOI</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-subset-component-data.html" rel="next">
<link href="./02-data_sources.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03-mus_comp_in_aoi.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Explore Map Units &amp; Components in AOI</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Minnesota Topsoil Classification for Soil Health Assessment</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-data_sources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data Sources</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-mus_comp_in_aoi.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Explore Map Units &amp; Components in AOI</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-subset-component-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Identify Target Components</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-horiz-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Horizon Data Averages</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-soil-prop-eda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Soil Property Exploratory Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-map-unit-agg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Map unit aggregation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-var-transformations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Variable Transformations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-plot-ec-lep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">MAP EC and LEP with <code>{terra}</code></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-additional-data-prep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Additional Data Preparation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-implement-kmeans.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Implement k-means</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-explore-clust-props.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Explore clusters</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-sample-points.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Sample validation points</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-cluster-pairwise-comp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Cluster pairwise comparisons</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-map-indiv-regions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Mapping individual clusters</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-pca-kmeans.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Do PCA before k-means</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-pca-kmeans-finalists.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">PCA-kmeans Clustering Finalists</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-compare-kmeans.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Comparing k-means scenarios</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-pca-cluster-pairwise-comp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">PCA Cluster pairwise comparisons</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-notes-pca6-8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Comparing PCA 6 &amp; PCA 8 Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./27-pairwise-nonparametric.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">(non-parametric) PCA Cluster pairwise comparisons</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./28-compare-variation-demo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Compare variation explained</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./29-welch-pairwise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Welch ANOVA for PCA cluster pairwise comparisons</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30-welch-compare-variation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Welch ANOVA - compare variation explained</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="header-section-number">2.1</span> Overview</a></li>
  <li><a href="#map-units" id="toc-map-units" class="nav-link" data-scroll-target="#map-units"><span class="header-section-number">2.2</span> Map Units</a></li>
  <li><a href="#components" id="toc-components" class="nav-link" data-scroll-target="#components"><span class="header-section-number">2.3</span> Components</a></li>
  <li><a href="#taxonomy-summaries" id="toc-taxonomy-summaries" class="nav-link" data-scroll-target="#taxonomy-summaries"><span class="header-section-number">2.4</span> Taxonomy Summaries</a>
  <ul class="collapse">
  <li><a href="#order" id="toc-order" class="nav-link" data-scroll-target="#order"><span class="header-section-number">2.4.1</span> Order</a></li>
  <li><a href="#suborder" id="toc-suborder" class="nav-link" data-scroll-target="#suborder"><span class="header-section-number">2.4.2</span> Suborder</a></li>
  <li><a href="#subgroup-family-long-name" id="toc-subgroup-family-long-name" class="nav-link" data-scroll-target="#subgroup-family-long-name"><span class="header-section-number">2.4.3</span> Subgroup &amp; Family (long name)</a></li>
  </ul></li>
  <li><a href="#variables-of-interest" id="toc-variables-of-interest" class="nav-link" data-scroll-target="#variables-of-interest"><span class="header-section-number">2.5</span> Variables of Interest</a></li>
  <li><a href="#sec-diag-feat" id="toc-sec-diag-feat" class="nav-link" data-scroll-target="#sec-diag-feat"><span class="header-section-number">2.6</span> Diagnostic Features</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Explore Map Units &amp; Components in AOI</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="overview" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="overview"><span class="header-section-number">2.1</span> Overview</h2>
<p>I have a list of map unit keys from my clipped area of interest. In order to reduce the file size of the TIF I was working with, I created new map unit key IDs. The cross-walk table is in <code>data/gSSURGO_MN/mukey_new_crosswalk.txt</code>. There are 7,862 unique map unit keys in my area of interest (AOI).</p>
<p>This is what the cross-walk table looks like:</p>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["MUKEY"],"name":[1],"type":["int"],"align":["right"]},{"label":["MUKEY_New"],"name":[2],"type":["int"],"align":["right"]},{"label":["Count"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"352143","2":"0","3":"2685","_rn_":"1"},{"1":"352159","2":"1","3":"4425","_rn_":"2"},{"1":"352160","2":"2","3":"7057","_rn_":"3"},{"1":"352162","2":"3","3":"595744","_rn_":"4"},{"1":"352165","2":"4","3":"83467","_rn_":"5"},{"1":"352166","2":"5","3":"110","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="map-units" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="map-units"><span class="header-section-number">2.2</span> Map Units</h2>
<p>I can use the map unit keys (MUKEYs) from my AOI to get more information on my target map units by calling up different tables from gSSURGO and subsetting based on the MUKEYs, and identifying the components within each mapunit in my AOI.</p>
<p>For more info about SSURGO tables and columns, refer to descriptions in the SSURGO metadata PDFs in <code>data/gSSURGO_MN/</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># which layers (tables) are available to me?</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># can inspect layers in .gdb</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>sf<span class="sc">::</span><span class="fu">st_layers</span>(<span class="st">"./data/gSSURGO_MN/gSSURGO_MN.gdb"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Driver: OpenFileGDB 
Available layers:
           layer_name     geometry_type features fields
1            chaashto                NA   223330      4
2       chconsistence                NA     2794     10
3       chdesgnsuffix                NA    62846      3
4             chfrags                NA   321265     12
5            chorizon                NA   130493    171
6             chpores                NA       16      9
7            chstruct                NA   110021      7
8         chstructgrp                NA    95901      4
9              chtext                NA        0      7
10          chtexture                NA   318704      4
11       chtexturegrp                NA   313739      6
12       chtexturemod                NA    50000      3
13          chunified                NA   240027      4
14      cocanopycover                NA       50      6
15          cocropyld                NA    34146     12
16     codiagfeatures                NA    31760     12
17         coecoclass                NA    52483      6
18          coeplants                NA    25544      7
19       coerosionacc                NA     5743      4
20          coforprod                NA     2726     12
21         coforprodo                NA        0     10
22       cogeomordesc                NA    83667      8
23   cohydriccriteria                NA    25091      3
24           cointerp                NA  5698886     13
25            comonth                NA   421728     17
26          component                NA    42529    109
27               copm                NA    49990      7
28            copmgrp                NA    34883      4
29       copwindbreak                NA   161238      8
30     corestrictions                NA     4369     13
31        cosoilmoist                NA   666791      9
32         cosoiltemp                NA       96      9
33        cosurffrags                NA    10955     15
34      cosurfmorphgc                NA    17984      6
35     cosurfmorphhpp                NA    28248      3
36      cosurfmorphmr                NA      460      3
37      cosurfmorphss                NA    42228      4
38         cotaxfmmin                NA    33654      3
39       cotaxmoistcl                NA    20332      3
40             cotext                NA    42529      7
41       cotreestomng                NA    32192      5
42        cotxfmother                NA    31091      3
43       distinterpmd                NA    11868      8
44       distlegendmd                NA       92     11
45             distmd                NA       92      4
46           featdesc                NA      801      6
47          laoverlap                NA      512      6
48             legend                NA       92     14
49         legendtext                NA        0      7
50            mapunit                NA    10688     24
51              month                NA       12      2
52           muaggatt                NA    10688     40
53         muaoverlap                NA    35224      4
54          mucropyld                NA    23355     10
55             mutext                NA    12230      7
56          sacatalog                NA       92     11
57           sainterp                NA    11868      9
58       sdvalgorithm                NA        8      4
59       sdvattribute                NA      211     53
60          sdvfolder                NA       20      6
61 sdvfolderattribute                NA      213      2
62       mdstatdomdet                NA     6930      5
63       mdstatdommas                NA      123      2
64       mdstatidxdet                NA      172      4
65       mdstatidxmas                NA      149      3
66     mdstatrshipdet                NA       66      5
67     mdstatrshipmas                NA       63      5
68      mdstattabcols                NA      865     14
69         mdstattabs                NA       75      5
70           FEATLINE Multi Line String    60902      5
71          FEATPOINT             Point   254435      4
72             MULINE Multi Line String        0      5
73            MUPOINT             Point        0      4
74          SAPOLYGON     Multi Polygon       96      5
75          MUPOLYGON     Multi Polygon  2123552      6
76              Valu1                NA    10688     58</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>mn_gdb <span class="ot">&lt;-</span> <span class="st">"data/gSSURGO_MN/gSSURGO_MN.gdb"</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># read only mapunit table, as dataframe</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>mn_mapunits <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="at">dsn =</span> mn_gdb, <span class="at">layer =</span> <span class="st">"mapunit"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `mapunit' from data source 
  `C:\Users\Hava\Documents\R\ch03-sh-cluster\data\gSSURGO_MN\gSSURGO_MN.gdb' 
  using driver `OpenFileGDB'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: no simple feature geometries present: returning a data.frame or tbl_df</code></pre>
</div>
</div>
<p>These are the columns in the mapunit table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mn_mapunits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "musym"         "muname"        "mukind"        "mustatus"     
 [5] "muacres"       "mapunitlfw_l"  "mapunitlfw_r"  "mapunitlfw_h" 
 [9] "mapunitpfa_l"  "mapunitpfa_r"  "mapunitpfa_h"  "farmlndcl"    
[13] "muhelcl"       "muwathelcl"    "muwndhelcl"    "interpfocus"  
[17] "invesintens"   "iacornsr"      "nhiforsoigrp"  "nhspiagr"     
[21] "vtsepticsyscl" "mucertstat"    "lkey"          "mukey"        </code></pre>
</div>
</div>
<p>We will subset to only include MUKEYs in our AOI.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># keep only the map units in my AOI (n=7862)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>target_mapunits <span class="ot">&lt;-</span> mn_mapunits <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mukey <span class="sc">%in%</span> aoi_mu<span class="sc">$</span>MUKEY)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># summary of map unit types</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>target_mapunits <span class="sc">%&gt;%</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(mukind) <span class="sc">%&gt;%</span> </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mukind"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Complex","2":"2013"},{"1":"Consociation","2":"5577"},{"1":"Undifferentiated group","2":"268"},{"1":"NA","2":"4"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># when is mukind undefined?</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>target_mapunits <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(mukind))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["musym"],"name":[1],"type":["chr"],"align":["left"]},{"label":["muname"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mukind"],"name":[3],"type":["chr"],"align":["left"]},{"label":["mustatus"],"name":[4],"type":["chr"],"align":["left"]},{"label":["muacres"],"name":[5],"type":["int"],"align":["right"]},{"label":["mapunitlfw_l"],"name":[6],"type":["int"],"align":["right"]},{"label":["mapunitlfw_r"],"name":[7],"type":["int"],"align":["right"]},{"label":["mapunitlfw_h"],"name":[8],"type":["int"],"align":["right"]},{"label":["mapunitpfa_l"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["mapunitpfa_r"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["mapunitpfa_h"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["farmlndcl"],"name":[12],"type":["chr"],"align":["left"]},{"label":["muhelcl"],"name":[13],"type":["chr"],"align":["left"]},{"label":["muwathelcl"],"name":[14],"type":["chr"],"align":["left"]},{"label":["muwndhelcl"],"name":[15],"type":["chr"],"align":["left"]},{"label":["interpfocus"],"name":[16],"type":["chr"],"align":["left"]},{"label":["invesintens"],"name":[17],"type":["chr"],"align":["left"]},{"label":["iacornsr"],"name":[18],"type":["int"],"align":["right"]},{"label":["nhiforsoigrp"],"name":[19],"type":["chr"],"align":["left"]},{"label":["nhspiagr"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["vtsepticsyscl"],"name":[21],"type":["chr"],"align":["left"]},{"label":["mucertstat"],"name":[22],"type":["chr"],"align":["left"]},{"label":["lkey"],"name":[23],"type":["chr"],"align":["left"]},{"label":["mukey"],"name":[24],"type":["chr"],"align":["left"]}],"data":[{"1":"W","2":"Water","3":"NA","4":"NA","5":"2280","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"Not prime farmland","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"13809","24":"394925"},{"1":"1356","2":"Water, miscellaneous","3":"NA","4":"NA","5":"227","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"Not prime farmland","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"13809","24":"394939"},{"1":"W","2":"Water","3":"NA","4":"NA","5":"8769","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"Not prime farmland","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"13811","24":"427939"},{"1":"W","2":"Water","3":"NA","4":"NA","5":"1137","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"Not prime farmland","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"13816","24":"428207"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># what's going on with W = water?</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>water_mukeys <span class="ot">&lt;-</span> target_mapunits <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(musym <span class="sc">==</span> <span class="st">"W"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(mukey)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>target_mapunits <span class="sc">%&gt;%</span> </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mukey <span class="sc">%in%</span> water_mukeys) <span class="sc">%&gt;%</span> </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["musym"],"name":[1],"type":["chr"],"align":["left"]},{"label":["muname"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mukind"],"name":[3],"type":["chr"],"align":["left"]},{"label":["mustatus"],"name":[4],"type":["chr"],"align":["left"]},{"label":["muacres"],"name":[5],"type":["int"],"align":["right"]},{"label":["mapunitlfw_l"],"name":[6],"type":["int"],"align":["right"]},{"label":["mapunitlfw_r"],"name":[7],"type":["int"],"align":["right"]},{"label":["mapunitlfw_h"],"name":[8],"type":["int"],"align":["right"]},{"label":["mapunitpfa_l"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["mapunitpfa_r"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["mapunitpfa_h"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["farmlndcl"],"name":[12],"type":["chr"],"align":["left"]},{"label":["muhelcl"],"name":[13],"type":["chr"],"align":["left"]},{"label":["muwathelcl"],"name":[14],"type":["chr"],"align":["left"]},{"label":["muwndhelcl"],"name":[15],"type":["chr"],"align":["left"]},{"label":["interpfocus"],"name":[16],"type":["chr"],"align":["left"]},{"label":["invesintens"],"name":[17],"type":["chr"],"align":["left"]},{"label":["iacornsr"],"name":[18],"type":["int"],"align":["right"]},{"label":["nhiforsoigrp"],"name":[19],"type":["chr"],"align":["left"]},{"label":["nhspiagr"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["vtsepticsyscl"],"name":[21],"type":["chr"],"align":["left"]},{"label":["mucertstat"],"name":[22],"type":["chr"],"align":["left"]},{"label":["lkey"],"name":[23],"type":["chr"],"align":["left"]},{"label":["mukey"],"name":[24],"type":["chr"],"align":["left"]}],"data":[{"1":"W","2":"Water","3":"NA","4":"NA","5":"2280","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"Not prime farmland","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"13809","24":"394925","_rn_":"1"},{"1":"W","2":"Water","3":"Consociation","4":"NA","5":"2","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"Not prime farmland","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"12953","24":"357194","_rn_":"2"},{"1":"W","2":"Water","3":"Consociation","4":"NA","5":"353391","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"Not prime farmland","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"13748","24":"397687","_rn_":"3"},{"1":"W","2":"Water","3":"Consociation","4":"NA","5":"15720","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"Not prime farmland","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"12956","24":"352341","_rn_":"4"},{"1":"W","2":"Water","3":"Consociation","4":"NA","5":"27","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"Not prime farmland","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"15777","24":"654761","_rn_":"5"},{"1":"W","2":"Water","3":"Consociation","4":"NA","5":"20449","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"Not prime farmland","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"13758","24":"430612","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># saving CSV of target map unit info</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(target_mapunits, <span class="st">"data/target_mapunit_table.csv"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="components" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="components"><span class="header-section-number">2.3</span> Components</h2>
<p>First a reminder of the columns in the component table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>mn_components <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="at">dsn =</span> mn_gdb, <span class="at">layer =</span> <span class="st">"component"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `component' from data source 
  `C:\Users\Hava\Documents\R\ch03-sh-cluster\data\gSSURGO_MN\gSSURGO_MN.gdb' 
  using driver `OpenFileGDB'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: no simple feature geometries present: returning a data.frame or tbl_df</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mn_components)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "comppct_l"        "comppct_r"        "comppct_h"       
  [4] "compname"         "compkind"         "majcompflag"     
  [7] "otherph"          "localphase"       "slope_l"         
 [10] "slope_r"          "slope_h"          "slopelenusle_l"  
 [13] "slopelenusle_r"   "slopelenusle_h"   "runoff"          
 [16] "tfact"            "wei"              "weg"             
 [19] "erocl"            "earthcovkind1"    "earthcovkind2"   
 [22] "hydricon"         "hydricrating"     "drainagecl"      
 [25] "elev_l"           "elev_r"           "elev_h"          
 [28] "aspectccwise"     "aspectrep"        "aspectcwise"     
 [31] "geomdesc"         "albedodry_l"      "albedodry_r"     
 [34] "albedodry_h"      "airtempa_l"       "airtempa_r"      
 [37] "airtempa_h"       "map_l"            "map_r"           
 [40] "map_h"            "reannualprecip_l" "reannualprecip_r"
 [43] "reannualprecip_h" "ffd_l"            "ffd_r"           
 [46] "ffd_h"            "nirrcapcl"        "nirrcapscl"      
 [49] "nirrcapunit"      "irrcapcl"         "irrcapscl"       
 [52] "irrcapunit"       "cropprodindex"    "constreeshrubgrp"
 [55] "wndbrksuitgrp"    "rsprod_l"         "rsprod_r"        
 [58] "rsprod_h"         "foragesuitgrpid"  "wlgrain"         
 [61] "wlgrass"          "wlherbaceous"     "wlshrub"         
 [64] "wlconiferous"     "wlhardwood"       "wlwetplant"      
 [67] "wlshallowwat"     "wlrangeland"      "wlopenland"      
 [70] "wlwoodland"       "wlwetland"        "soilslippot"     
 [73] "frostact"         "initsub_l"        "initsub_r"       
 [76] "initsub_h"        "totalsub_l"       "totalsub_r"      
 [79] "totalsub_h"       "hydgrp"           "corcon"          
 [82] "corsteel"         "taxclname"        "taxorder"        
 [85] "taxsuborder"      "taxgrtgroup"      "taxsubgrp"       
 [88] "taxpartsize"      "taxpartsizemod"   "taxceactcl"      
 [91] "taxreaction"      "taxtempcl"        "taxmoistscl"     
 [94] "taxtempregime"    "soiltaxedition"   "castorieindex"   
 [97] "flecolcomnum"     "flhe"             "flphe"           
[100] "flsoilleachpot"   "flsoirunoffpot"   "fltemik2use"     
[103] "fltriumph2use"    "indraingrp"       "innitrateleachi" 
[106] "misoimgmtgrp"     "vasoimgtgrp"      "mukey"           
[109] "cokey"           </code></pre>
</div>
</div>
<p>Summarizing some info about number of components, major components</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># keep the components in my target map units</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>target_comp <span class="ot">&lt;-</span> mn_components <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mukey <span class="sc">%in%</span> target_mapunits<span class="sc">$</span>mukey) </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># looking at this, it's probabaly safe to exclude </span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># compname == "Water" when the comppct_r is also 100%</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># there's one here where water is only 5%, "Riverwash", rest are 100%</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>water_comp <span class="ot">&lt;-</span> target_comp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(mukey <span class="sc">%in%</span> water_mukeys)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># how many components?</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(target_comp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 31065</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># how many major components? (defined by "majcompflag")</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>target_comp <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(majcompflag <span class="sc">==</span> <span class="st">"Yes"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10588</code></pre>
</div>
</div>
<p>For our unique MUKEYs, how many components in each?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># how many components per mukey? </span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>comp_nest <span class="ot">&lt;-</span> target_comp <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(mukey) <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>()</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>comp_nest_n <span class="ot">&lt;-</span> comp_nest <span class="sc">%&gt;%</span> </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">n_comp =</span> <span class="fu">map_dbl</span>(data, nrow))</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>comp_nest_n <span class="sc">%&gt;%</span> </span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(n_comp) <span class="sc">%&gt;%</span> </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n_mapunits"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["n_comp"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["n_mapunits"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"1","2":"624"},{"1":"2","2":"793"},{"1":"3","2":"1622"},{"1":"4","2":"2056"},{"1":"5","2":"1444"},{"1":"6","2":"864"},{"1":"7","2":"331"},{"1":"8","2":"108"},{"1":"9","2":"20"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># just the major components from target MUs</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>maj_comp <span class="ot">&lt;-</span> target_comp <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(majcompflag <span class="sc">==</span> <span class="st">"Yes"</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(maj_comp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10588</code></pre>
</div>
</div>
</section>
<section id="taxonomy-summaries" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="taxonomy-summaries"><span class="header-section-number">2.4</span> Taxonomy Summaries</h2>
<section id="order" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="order"><span class="header-section-number">2.4.1</span> Order</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>target_comp <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(taxorder) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["taxorder"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Spodosols","2":"1"},{"1":"Vertisols","2":"467"},{"1":"Inceptisols","2":"945"},{"1":"Histosols","2":"1198"},{"1":"Entisols","2":"1812"},{"1":"Alfisols","2":"3026"},{"1":"NA","2":"6330"},{"1":"Mollisols","2":"17286"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># what's up with taxonomic order = NA?</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># not really farmable stuff.</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>maj_comp <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(taxorder)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(compname) <span class="sc">%&gt;%</span> </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Water"                  "Pits"                   "Dumps"                 
 [4] "Urban land"             "Riverwash"              "Highway"               
 [7] "Pits, gravel"           "Rock outcrop"           "Beaches"               
[10] "Pits, limestone quarry" "Dune land"              "Terrace escarpments"   
[13] "Alluvial"              </code></pre>
</div>
</div>
</section>
<section id="suborder" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="suborder"><span class="header-section-number">2.4.2</span> Suborder</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>suborders <span class="ot">&lt;-</span> target_comp <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(taxsuborder) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>suborders <span class="sc">%&gt;%</span> </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">reorder</span>(taxsuborder, <span class="sc">-</span>n), <span class="at">x =</span> n)) <span class="sc">+</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Suborder"</span>) <span class="sc">+</span> </span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Count"</span>) <span class="sc">+</span> </span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Number of components by suborder"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="03-mus_comp_in_aoi_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># what's up with taxonomic suborder = NA?</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># much of this likely dropped if we use CDL to subset </span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>comps_no_taxsuborder <span class="ot">&lt;-</span> target_comp <span class="sc">%&gt;%</span> </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(taxsuborder)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(compname) <span class="sc">%&gt;%</span> </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(comps_no_taxsuborder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 829</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(comps_no_taxsuborder, <span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Water"                                  
 [2] "Pits"                                   
 [3] "Dumps"                                  
 [4] "Cormant"                                
 [5] "Urban land"                             
 [6] "Mavie"                                  
 [7] "Kratka"                                 
 [8] "Radium"                                 
 [9] "Sahkahtay"                              
[10] "Deerwood"                               
[11] "Flaming"                                
[12] "Northwood"                              
[13] "Rosewood"                               
[14] "Roliss"                                 
[15] "Hamre"                                  
[16] "Percy"                                  
[17] "Berner"                                 
[18] "Soils that have a mineral surface layer"
[19] "Strathcona"                             
[20] "Huot"                                   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(comps_no_taxsuborder, <span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Sawmill"                             
 [2] "Marshan"                             
 [3] "Tripoli"                             
 [4] "Poorly drained sandy alluvial soils" 
 [5] "Poorly and very poorly drained soils"
 [6] "Newalbin"                            
 [7] "Clrippin"                            
 [8] "Collinwood"                          
 [9] "Lakefield"                           
[10] "Ocheyedan"                           
[11] "Fostoria"                            
[12] "Crippen"                             
[13] "Farrer"                              
[14] "Ocheydan"                            
[15] "Grogan"                              
[16] "Farrar"                              
[17] "PD sandy soils"                      
[18] "Moundprairie"                        
[19] "PD soils"                            
[20] "Walford Variant"                     </code></pre>
</div>
</div>
</section>
<section id="subgroup-family-long-name" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="subgroup-family-long-name"><span class="header-section-number">2.4.3</span> Subgroup &amp; Family (long name)</h3>
<p>The <code>taxclname</code> is a concatenation of the taxonomy subgroup and family. On 11 August, 2022 Nic and I talked about how this could be another way to pull out mineralogy information. Could grab “smectitic” or “mixed” from these names if we wanted to do yes/no variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>target_comp <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(taxclname) <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sandy over clayey, mixed over smectitic, frigid Typic Calciaquolls"
[2] "Sandy over clayey, mixed over smectitic, frigid Aquic Calciudolls" 
[3] "Mixed, frigid Aquic Udipsamments"                                  
[4] "Fine, smectitic, frigid Typic Epiaquerts"                          
[5] "Sandy, mixed, frigid Typic Endoaquolls"                            
[6] "Sandy, mixed, frigid Aeric Calciaquolls"                           </code></pre>
</div>
</div>
</section>
</section>
<section id="variables-of-interest" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="variables-of-interest"><span class="header-section-number">2.5</span> Variables of Interest</h2>
<p>I think my next step is to use the <code>chorizon</code> table and pull the variables I’m interested in for each of my major components. Devine et al.&nbsp;2021 did 0-30cm depth-weighted averages. I am going to do 0-20cm because I believe this is more likely to be the available depth in our validation datasets (esp.&nbsp;CIG).</p>
<p>Then I can <a href="http://ncss-tech.github.io/AQP/demos/profileApply/loafercreek.html#26_build-your-own_spcs">turn my horizon table into an SPC object</a>, with cokey as “site”?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>chorizon <span class="ot">&lt;-</span> mn_components <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="at">dsn =</span> mn_gdb, <span class="at">layer =</span> <span class="st">"chorizon"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `chorizon' from data source 
  `C:\Users\Hava\Documents\R\ch03-sh-cluster\data\gSSURGO_MN\gSSURGO_MN.gdb' 
  using driver `OpenFileGDB'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: no simple feature geometries present: returning a data.frame or tbl_df</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>target_horiz <span class="ot">&lt;-</span> chorizon <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cokey <span class="sc">%in%</span> maj_comp<span class="sc">$</span>cokey)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sec-diag-feat" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="sec-diag-feat"><span class="header-section-number">2.6</span> Diagnostic Features</h2>
<p>Here, I’m pulling out the depth to restrictive horizon (if any) in the profile. Note that this may be &gt;20cm, for our other features we are summarizing soil properties in the 0-20cm depth range.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read only diag features table, as dataframe</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>diag <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="at">dsn =</span> mn_gdb, <span class="at">layer =</span> <span class="st">"codiagfeatures"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `codiagfeatures' from data source 
  `C:\Users\Hava\Documents\R\ch03-sh-cluster\data\gSSURGO_MN\gSSURGO_MN.gdb' 
  using driver `OpenFileGDB'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: no simple feature geometries present: returning a data.frame or tbl_df</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check out what kind of diagnostic features we have</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(diag<span class="sc">$</span>featkind) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Histic epipedon"                         
 [2] "Ochric epipedon"                         
 [3] "Albic materials"                         
 [4] "Albic horizon"                           
 [5] "Argillic horizon"                        
 [6] "Aquic conditions"                        
 [7] "Lamellae"                                
 [8] "Sapric soil materials"                   
 [9] "Hemic soil materials"                    
[10] "Fibric soil materials"                   
[11] "Cambic horizon"                          
[12] "Mollic epipedon"                         
[13] "Calcic horizon"                          
[14] "Abrupt textural change"                  
[15] "Slickensides"                            
[16] "Strongly contrasting particle size class"
[17] "Lithologic discontinuity"                
[18] NA                                        
[19] "Lithic contact"                          
[20] "Spodic horizon"                          </code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>target_diag <span class="ot">&lt;-</span> diag <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cokey <span class="sc">%in%</span> maj_comp<span class="sc">$</span>cokey)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ok, so from above we can see that 10458 cokeys out of a total of 10588 have something entered in the <code>featkind</code> field as a diagnostic feature. Now let’s investigate how many of those might be considered restrictive to roots (relevant in agricultural context):</p>
<p>target_restr</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>target_restr <span class="ot">&lt;-</span> target_diag <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(featkind <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Lithic contact"</span>, </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Densic contact"</span>,</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Paralithic contact"</span>))</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co"># how many cokeys have a restrictive horizon? </span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(target_restr<span class="sc">$</span>cokey))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 69</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>target_restr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["featkind"],"name":[1],"type":["chr"],"align":["left"]},{"label":["featdept_l"],"name":[2],"type":["int"],"align":["right"]},{"label":["featdept_r"],"name":[3],"type":["int"],"align":["right"]},{"label":["featdept_h"],"name":[4],"type":["int"],"align":["right"]},{"label":["featdepb_l"],"name":[5],"type":["int"],"align":["right"]},{"label":["featdepb_r"],"name":[6],"type":["int"],"align":["right"]},{"label":["featdepb_h"],"name":[7],"type":["int"],"align":["right"]},{"label":["featthick_l"],"name":[8],"type":["int"],"align":["right"]},{"label":["featthick_r"],"name":[9],"type":["int"],"align":["right"]},{"label":["featthick_h"],"name":[10],"type":["int"],"align":["right"]},{"label":["cokey"],"name":[11],"type":["chr"],"align":["left"]},{"label":["codiagfeatkey"],"name":[12],"type":["chr"],"align":["left"]}],"data":[{"1":"Densic contact","2":"70","3":"147","4":"193","5":"100","6":"200","7":"200","8":"NA","9":"NA","10":"NA","11":"21726416","12":"12085252"},{"1":"Densic contact","2":"50","3":"102","4":"163","5":"200","6":"200","7":"200","8":"NA","9":"98","10":"NA","11":"21726420","12":"12085267"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21743069","12":"12097498"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21743070","12":"12097504"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21743074","12":"12097510"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21743078","12":"12097516"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21743080","12":"12097522"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21743085","12":"12097528"},{"1":"Densic contact","2":"50","3":"102","4":"163","5":"200","6":"200","7":"200","8":"NA","9":"98","10":"NA","11":"21743097","12":"12097546"},{"1":"Densic contact","2":"70","3":"147","4":"193","5":"100","6":"200","7":"200","8":"NA","9":"NA","10":"NA","11":"21743102","12":"12097541"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21695278","12":"12016634"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21695279","12":"12016640"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21695286","12":"12016652"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21695288","12":"12016658"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21695289","12":"12016664"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21695292","12":"12016670"},{"1":"Densic contact","2":"50","3":"102","4":"163","5":"200","6":"200","7":"200","8":"NA","9":"98","10":"NA","11":"21695798","12":"12016702"},{"1":"Densic contact","2":"70","3":"147","4":"193","5":"100","6":"200","7":"200","8":"NA","9":"NA","10":"NA","11":"21695802","12":"12016713"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21791312","12":"12128165"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21791314","12":"12128159"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21791320","12":"12128177"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21791322","12":"12128171"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21791323","12":"12128183"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21791326","12":"12128189"},{"1":"Densic contact","2":"70","3":"147","4":"193","5":"100","6":"200","7":"200","8":"NA","9":"NA","10":"NA","11":"21791340","12":"12128202"},{"1":"Densic contact","2":"50","3":"102","4":"163","5":"200","6":"200","7":"200","8":"NA","9":"98","10":"NA","11":"21791343","12":"12128207"},{"1":"Densic contact","2":"50","3":"104","4":"150","5":"200","6":"200","7":"200","8":"50","9":"96","10":"150","11":"21733956","12":"12090208"},{"1":"Densic contact","2":"100","3":"104","4":"150","5":"200","6":"200","7":"200","8":"NA","9":"96","10":"NA","11":"21734010","12":"12090861"},{"1":"Densic contact","2":"50","3":"104","4":"150","5":"200","6":"200","7":"200","8":"50","9":"96","10":"150","11":"21734112","12":"12090388"},{"1":"Densic contact","2":"50","3":"104","4":"150","5":"200","6":"200","7":"200","8":"50","9":"96","10":"150","11":"21734114","12":"12090384"},{"1":"Densic contact","2":"50","3":"104","4":"150","5":"200","6":"200","7":"200","8":"50","9":"96","10":"150","11":"21734115","12":"12090396"},{"1":"Densic contact","2":"100","3":"109","4":"200","5":"200","6":"200","7":"200","8":"50","9":"91","10":"100","11":"21734116","12":"12090400"},{"1":"Densic contact","2":"50","3":"104","4":"150","5":"200","6":"200","7":"200","8":"50","9":"96","10":"150","11":"21734119","12":"12090416"},{"1":"Densic contact","2":"100","3":"109","4":"200","5":"200","6":"200","7":"200","8":"50","9":"91","10":"100","11":"21734120","12":"12090412"},{"1":"Densic contact","2":"100","3":"107","4":"150","5":"200","6":"200","7":"200","8":"NA","9":"93","10":"NA","11":"21734131","12":"12090439"},{"1":"Densic contact","2":"100","3":"104","4":"150","5":"200","6":"200","7":"200","8":"NA","9":"96","10":"NA","11":"21734137","12":"12090451"},{"1":"Densic contact","2":"50","3":"104","4":"150","5":"200","6":"200","7":"200","8":"50","9":"96","10":"150","11":"21734141","12":"12090469"},{"1":"Densic contact","2":"34","3":"99","4":"160","5":"200","6":"200","7":"200","8":"NA","9":"101","10":"NA","11":"21734142","12":"12090484"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21774009","12":"12117800"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21774010","12":"12117806"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21774015","12":"12117815"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21774016","12":"12117821"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21774017","12":"12117827"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21774020","12":"12117833"},{"1":"Densic contact","2":"50","3":"102","4":"163","5":"200","6":"200","7":"200","8":"NA","9":"98","10":"NA","11":"21774070","12":"12117894"},{"1":"Densic contact","2":"70","3":"147","4":"193","5":"100","6":"200","7":"200","8":"NA","9":"NA","10":"NA","11":"21774075","12":"12117905"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21789937","12":"12126931"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21789938","12":"12126937"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21789940","12":"12126949"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21789945","12":"12126943"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21789946","12":"12126955"},{"1":"Densic contact","2":"71","3":"116","4":"122","5":"71","6":"116","7":"122","8":"NA","9":"0","10":"NA","11":"21789950","12":"12126961"},{"1":"Densic contact","2":"70","3":"147","4":"193","5":"100","6":"200","7":"200","8":"NA","9":"NA","10":"NA","11":"21789965","12":"12126974"},{"1":"Densic contact","2":"50","3":"102","4":"163","5":"200","6":"200","7":"200","8":"NA","9":"98","10":"NA","11":"21789969","12":"12126979"},{"1":"Densic contact","2":"100","3":"115","4":"150","5":"100","6":"115","7":"150","8":"0","9":"0","10":"0","11":"21778778","12":"12121251"},{"1":"Paralithic contact","2":"100","3":"107","4":"149","5":"200","6":"200","7":"200","8":"51","9":"93","10":"100","11":"21735582","12":"12093245"},{"1":"Paralithic contact","2":"100","3":"107","4":"149","5":"200","6":"200","7":"200","8":"51","9":"93","10":"100","11":"21737725","12":"12094841"},{"1":"Paralithic contact","2":"100","3":"107","4":"149","5":"200","6":"200","7":"200","8":"51","9":"93","10":"100","11":"21737731","12":"12094818"},{"1":"Paralithic contact","2":"51","3":"99","4":"102","5":"51","6":"99","7":"102","8":"0","9":"0","10":"0","11":"21791113","12":"12127946"},{"1":"Paralithic contact","2":"51","3":"99","4":"102","5":"51","6":"99","7":"102","8":"0","9":"0","10":"0","11":"21791174","12":"12127949"},{"1":"Paralithic contact","2":"51","3":"99","4":"102","5":"51","6":"99","7":"102","8":"0","9":"0","10":"0","11":"21791177","12":"12127952"},{"1":"Paralithic contact","2":"100","3":"107","4":"149","5":"200","6":"200","7":"200","8":"51","9":"93","10":"100","11":"21791182","12":"12128001"},{"1":"Paralithic contact","2":"100","3":"107","4":"149","5":"200","6":"200","7":"200","8":"51","9":"93","10":"100","11":"21791185","12":"12127989"},{"1":"Paralithic contact","2":"100","3":"107","4":"149","5":"200","6":"200","7":"200","8":"51","9":"93","10":"100","11":"21772951","12":"12117588"},{"1":"Paralithic contact","2":"51","3":"99","4":"102","5":"51","6":"99","7":"102","8":"0","9":"0","10":"0","11":"21793214","12":"12130036"},{"1":"Paralithic contact","2":"100","3":"107","4":"149","5":"200","6":"200","7":"200","8":"51","9":"93","10":"100","11":"21793217","12":"12130037"},{"1":"Paralithic contact","2":"100","3":"107","4":"149","5":"200","6":"200","7":"200","8":"51","9":"93","10":"100","11":"21736557","12":"12094207"},{"1":"Paralithic contact","2":"100","3":"107","4":"149","5":"200","6":"200","7":"200","8":"51","9":"93","10":"100","11":"21736560","12":"12094184"},{"1":"Paralithic contact","2":"100","3":"107","4":"149","5":"200","6":"200","7":"200","8":"51","9":"93","10":"100","11":"21740126","12":"12096616"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save this in case we want to investigate further</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co">#it's such a small number, seems unlikely </span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(target_restr, <span class="st">"./data/restr_horiz_data_cokey.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02-data_sources.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data Sources</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-subset-component-data.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Identify Target Components</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>